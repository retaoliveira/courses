---
title: "Lab 4.2"
draft: no
date: '2021-10-15T00:00:00+01:00'
menu:
  intror_master:
    parent: Unidade 4
    weight: 19
toc: yes
type: docs
weight: 19
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">

</div>

<div id="dados-wide-x-long" class="section level1">
<h1>Dados <em>wide</em> x <em>long</em></h1>
<div id="exercícios" class="section level2">
<h2>Exercícios</h2>
<div id="diretrizes-gerais" class="section level3">
<h3><strong>Diretrizes gerais:</strong></h3>
<ol style="list-style-type: decimal">
<li>Instale o pacote <code>reshape2</code></li>
</ol>
<pre class="r"><code>install.packages(&quot;reshape2&quot;)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Baixe o arquivo .Rmd e o .csvb e abra no RStudio.</li>
</ol>
<p><a href="https://cefetmgbr-my.sharepoint.com/:u:/g/personal/renataoliveira_cefetmg_br/EeohRlLO7OtCtKdHO72GS2oBc8B1LBdlZuoRt02jIw2LLg?e=dUCXFm">Arquivo .Rmd</a></p>
<p><a href="https://cefetmgbr-my.sharepoint.com/:x:/g/personal/renataoliveira_cefetmg_br/EVHWeyy072lFknBr6lRrlQQBRq2xLKWI0TA6SUB7KUvnHQ?e=LsnD1h">Arquivo .csv</a></p>
<ol start="3" style="list-style-type: decimal">
<li><p>Siga as diretrizes da atividade.</p></li>
<li><p>Rode o arquivo .Rmd por meio do ícone <code>knitr</code></p></li>
<li><p>Salve o .Rmd e <strong>submeta-o por meio do email <a href="mailto:renataoliveira@gmail.com" class="email">renataoliveira@gmail.com</a></strong>.</p></li>
</ol>
<hr>
</hr>
</div>
<div id="exercício-1." class="section level3">
<h3>Exercício 1.</h3>
<p>Rode o código para gerar o histograma a seguir:</p>
<pre class="r"><code># library
library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.5     v purrr   0.3.4
## v tibble  3.1.6     v dplyr   1.0.7
## v tidyr   1.1.4     v stringr 1.4.0
## v readr   2.0.2     v forcats 0.5.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(reshape2)</code></pre>
<pre><code>## 
## Attaching package: &#39;reshape2&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     smiths</code></pre>
<pre class="r"><code># Build dataset with different distributions
data &lt;- data.frame(
  type = c( rep(&quot;variable 1&quot;, 1000), rep(&quot;variable 2&quot;, 1000) ),
  value = c( rnorm(1000), rnorm(1000, mean=4) )
)

# Represent it
p &lt;- data %&gt;%
  ggplot( aes(x=value, fill=type)) +
    geom_histogram( color=&quot;#e9ecef&quot;, alpha=0.6, position = &#39;identity&#39;) +
    scale_fill_manual(values=c(&quot;#69b3a2&quot;, &quot;#404080&quot;)) +
    theme_minimal() +
    labs(fill=&quot;&quot;)

p</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/disciplinas/intror_master/lab42_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
</div>
<div id="transformando-dados-de-wide-para-long-para-representar-dois-dados-iguais-de-recortes-distintos-no-mesmo-gráfico" class="section level2">
<h2>Transformando dados de wide para long para representar dois dados iguais de recortes distintos no mesmo gráfico</h2>
<pre class="r"><code>dados_bh &lt;- read_delim(&quot;data/dados_bh.csv&quot;, 
    delim = &quot;;&quot;, escape_double = FALSE, trim_ws = TRUE)</code></pre>
<pre class="r"><code>internet_antes &lt;- dados_bh %&gt;% 
  select(internet_compras_antes) %&gt;% 
  mutate(dado = &quot;antes&quot;) %&gt;% 
  rename(&quot;internet&quot; = &quot;internet_compras_antes&quot;)


internet_depois &lt;- dados_bh %&gt;% 
  select(internet_compras_depois) %&gt;% 
  mutate(dado = &quot;durante&quot;) %&gt;% 
  rename(&quot;internet&quot; = &quot;internet_compras_depois&quot;)


data_plot &lt;- data.frame(rbind(internet_antes, internet_depois))

data_plot_long &lt;- data_plot %&gt;% 
  melt(id.vars = c(&quot;dado&quot;), value.name = &quot;freq&quot;, na.rm = TRUE, factorsAsStrings = FALSE) %&gt;% 
  select(!variable)</code></pre>
<pre class="r"><code>ggplot(data_plot_long) + 
  geom_bar(aes(x = freq, fill = dado), position = &quot;dodge&quot;) +
  coord_flip() +
  labs(x = &quot;&quot;, y = &quot;&quot;, fill = &quot;Período&quot;) +
  xlab(&quot;&quot;) +
  ylab(&quot;&quot;) +
  guides(fill = guide_legend(reverse=T)) +
  theme(legend.position = &quot;bottom&quot;, axis.title.x=element_blank(), axis.text.x=element_blank(), axis.ticks.x=element_blank()) +
  scale_fill_brewer(palette = &quot;Set1&quot;) </code></pre>
</div>
</div>
