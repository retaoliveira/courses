---
title: "Atividade 3"
draft: false
date: '2023-04-19T00:00:00+01:00'
menu:
  dados_ppga:
    parent: Atividades de aprendizagem
    weight: 13
toc: yes
type: docs
weight: 13
---


<div id="TOC">

</div>

<ol style="list-style-type: decimal">
<li>Instale o pacote <code>cepespR</code></li>
</ol>
<pre class="r"><code>devtools::install_github(&quot;Cepesp-Fgv/cepesp-r&quot;)</code></pre>
<pre><code>## Using github PAT from envvar GITHUB_PAT</code></pre>
<pre><code>## Downloading GitHub repo Cepesp-Fgv/cepesp-r@HEAD</code></pre>
<pre><code>## 
## ── R CMD build ─────────────────────────────────────────────────────────────────
## * checking for file ‘/private/var/folders/kv/97__br293mdbgmqfdkvcq0z00000gn/T/Rtmp2qZTxa/remotesa43572916481/Cepesp-Fgv-cepesp-r-7253b4a/DESCRIPTION’ ... OK
## * preparing ‘cepespR’:
## * checking DESCRIPTION meta-information ... OK
## * checking for LF line-endings in source and make files and shell scripts
## * checking for empty or unneeded directories
## Omitted ‘LazyData’ from DESCRIPTION
## * building ‘cepespR_0.1.2.tar.gz’</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Baixe o arquivo .Rmd e o .csvb e abra no RStudio.</li>
</ol>
<p><a href="https://cefetmgbr-my.sharepoint.com/:u:/g/personal/renataoliveira_cefetmg_br/ETG7uY5TF9ZHlNv70InRlLwBtCYguNA9Sw-QtdIX0qSLwA?e=wTD4jf">Arquivo .Rmd</a></p>
<ol start="3" style="list-style-type: decimal">
<li><p>Resolva as questões.</p></li>
<li><p>Gere um tipo de documento .Rmd de sua preferência.</p></li>
<li><p>Envie por email (<a href="mailto:renataoliveira@gmail.com" class="email">renataoliveira@gmail.com</a> ou <a href="mailto:renataoliveira@cefetmg.br" class="email">renataoliveira@cefetmg.br</a>) o arquivo .Rmd e o arquivo gerado.</p></li>
</ol>
<p><strong>Agradecimento: Leo Barone pelo maravilhoso tutorial!</strong></p>
<div id="botando-o-computador-para-trabalhar" class="section level1">
<h1>Botando o computador para trabalhar</h1>
<p>Se há um tutorial sobre lógica de programação, é este. Os tópicos deste tutorial são os mais importantes para que possamos escrever algoritmos e botar o computador para fazer o que sabe de melhor: repetir instruções e tarefas. Veremos, em primeiro lugar, operadores relacionais e lógicos e, a seguir, cláusulas condicionais, loops e funções.</p>
<div id="operadores-relacionais" class="section level2">
<h2>Operadores relacionais</h2>
<p>Uma das especialidades do computador é verificar se proposições simples são verdadeiras ou falsas. <strong>Operadores relacionais</strong> servem para verificar se objetos são iguais, diferentes, maiores ou menores. São seis operadores relacionais e a tabela abaixo apresenta os seus símbolos.</p>
<table>
<thead>
<tr class="header">
<th>Operador</th>
<th align="center">Símbolo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Igual</td>
<td align="center">==</td>
</tr>
<tr class="even">
<td>Diferente</td>
<td align="center">!=</td>
</tr>
<tr class="odd">
<td>Maior</td>
<td align="center">&gt;</td>
</tr>
<tr class="even">
<td>Maior ou igual</td>
<td align="center">&gt;=</td>
</tr>
<tr class="odd">
<td>Menor</td>
<td align="center">&lt;</td>
</tr>
<tr class="even">
<td>Menor ou igual</td>
<td align="center">&lt;=</td>
</tr>
</tbody>
</table>
<p>Não discutiremos todas as regras de comparação de objetos, mas passaremos por um conjunto grande de exemplos a partir do qual elas podem ser inferidas.</p>
<p>Vamos começar com alguns exemplos simples:</p>
<pre class="r"><code>42 == 41
42 != 41
(2 + 2) == (3 + 1)
(2 + 2) != (3 + 1)
5 &gt; 3
5 &lt; 3
42 &gt; 42
42 &lt; 41
42 &gt;= 42
42 &lt;= 41</code></pre>
<p>Antes de avançar, tenha certeza que entendeu os exemplos acima.</p>
<p>Operadores relacionais também vale para textos:</p>
<pre class="r"><code>&quot;texto&quot; == &quot;texto&quot;
&quot;texto&quot; == &quot;texTo&quot;
&quot;texto&quot; != &quot;texto&quot;</code></pre>
<p>Note no segundo exemplo que o R é “case sensitive”, ou seja, diferencia maiúsculas de minúsculas ao comparar textos.</p>
<p>Textos também podem ser ordenados (lexicograficamente, isto é, alfabeticamente):</p>
<pre class="r"><code>&quot;a&quot; &gt; &quot;b&quot;
&quot;a&quot; &lt; &quot;b&quot;
&quot;A&quot; &lt; &quot;b&quot;
&quot;A&quot; &gt; &quot;a&quot;</code></pre>
<p>Inclusive palavras inteiras e sentenças:</p>
<pre class="r"><code>&quot;cachorro&quot; &lt; &quot;cachorro quente&quot;
&quot;churrasco de gato&quot; &gt; &quot;cachorro quente&quot;</code></pre>
<p>E valores lógicos? Veja se entende o que acontece nos exemplos abaixo:</p>
<pre class="r"><code>TRUE == 1
FALSE == 0
TRUE &gt; FALSE</code></pre>
<p>Podemos comparar valores armazenados em variáveis da mesma maneira que fizemos nos exemplos até aqui:</p>
<pre class="r"><code>x &lt;- 5
y &lt;- 10
x &gt; y</code></pre>
</div>
<div id="operadores-relacionais-e-vetores" class="section level2">
<h2>Operadores relacionais e vetores</h2>
<p>É possível comparar um vetor com um valor. Neste caso, cada elemento do vetor é comparado individualmente ao valor e o resultado é um vetor lógico de tamanho igual ao vetor comparado.</p>
<pre class="r"><code>votos16 &lt;- c(1030, 551, 992, 345, 203, 2037)
votos16 &gt;= 1000</code></pre>
<p>Vamos usar o vetor “votos16”, que contém votos de candidatos fictícios em 2016, com os votos dos mesmo candidatos em 2012:</p>
<pre class="r"><code>votos12 &lt;- c(890, 354, 950, 400, 50, 3416)
votos16 &gt; votos12</code></pre>
<p>Veja que, na comparação entre dois vetores, os elementos são comparados par a par de acordo com a sua posição no vetor. O vetor lógico resultante tem o mesmo tamanho dos vetores comparados.</p>
</div>
<div id="operadores-lógicos-booleanos" class="section level2">
<h2>Operadores Lógicos (Booleanos)</h2>
<p>É perfeitamente possível combinar proposições com os <strong>operadores lógicos</strong> “e”, “ou” e “não”:</p>
<table>
<thead>
<tr class="header">
<th>Operador</th>
<th align="center">Símbolo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>E</td>
<td align="center">&amp;</td>
</tr>
<tr class="even">
<td>Ou</td>
<td align="center">|</td>
</tr>
<tr class="odd">
<td>Não</td>
<td align="center">!</td>
</tr>
</tbody>
</table>
<p>Por exemplo, se queremos verificar todos os candidatos que obtiveram acima de 500 (exclusive) <strong>E</strong> abaixo de 1500 (inclusive) votos, fazemos:</p>
<pre class="r"><code>votos16 &gt; 500 &amp; votos16 &lt;= 1500</code></pre>
<p>Veja a tabela de possibilidades de combinação de duas proposições com a conjunção “e”:</p>
<table>
<thead>
<tr class="header">
<th>Proposição 1</th>
<th>Proposição 2</th>
<th>Combinação</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TRUE</td>
<td>TRUE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td>TRUE</td>
<td>FALSE</td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td>FALSE</td>
<td>TRUE</td>
<td>FALSE</td>
</tr>
<tr class="even">
<td>FALSE</td>
<td>FALSE</td>
<td>FALSE</td>
</tr>
</tbody>
</table>
<p>Se o valor atende às duas condições, então o resultado é TRUE. Se ao menos uma proposição é falsa, sob a conjunção “e”, então a combinação das proposições também é.</p>
<p>Com o operador “Ou”, a combinação de proposições é verdadeira se pelo menos uma delas for verdadeira.</p>
<pre class="r"><code>votos16 &lt; 500 | votos12 &gt; 1500</code></pre>
<p>Veja a tabela de possibilidades de combinação de duas proposições com a conjunção “ou”:</p>
<table>
<thead>
<tr class="header">
<th>Proposição 1</th>
<th>Proposição 2</th>
<th>Combinação</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TRUE</td>
<td>TRUE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td>TRUE</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td>FALSE</td>
<td>TRUE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td>FALSE</td>
<td>FALSE</td>
<td>FALSE</td>
</tr>
</tbody>
</table>
<p>Finalmente, o operador lógico “não” tem a função de reverter um proposição:</p>
<pre class="r"><code>!TRUE
!(5 &gt; 3)
!(votos16 &gt; 500 &amp; votos16 &lt;= 1500)</code></pre>
<p>Lembre-se que, quando trabalhamos com vetores lógicos, podemos tratá-los como se fossem zeros e uns, tal qual no exemplo:</p>
<pre class="r"><code>sum(votos16 &gt; votos12)</code></pre>
</div>
<div id="cláusulas-condicionais" class="section level2">
<h2>Cláusulas condicionais</h2>
<p>Um dos usos mais importantes dos operadores relacionais e lógicos é na construção de <strong>cláusulas condicionais</strong>, “if”, “else” e “else if”. Elas são fundamentais para a construção de funções e algoritmos. Veja um uso simples do condicional <em>if</em>, para o cálculo do valor absoluto de uma variável:</p>
<pre class="r"><code># exemplo com x negativo
x &lt;- -23

if (x &lt; 0){
  x &lt;- -x
}

print(x)

# exemplo com x positivo
x &lt;- 23

if (x &lt; 0){
  x &lt;- -x
}

print(x)</code></pre>
<p>A condição que o <em>if</em> deve atender vem entre parênteses. A instrução a ser atendida caso a cláusula seja verdadeira vem dentro das chaves. Aliás, é boa prática (na maioria dos casos) abrir as chaves em uma linha, escrever as instruções em outra, e fechar as chaves na linha seguinte ao final das instruções, como no exemplo. Também é boa prática “identar”, ou seja, desalinhar as instruções do restante do código. Falaremos sobre “estilo” em algum momento do curso. Por enquanto, apenas observe e não se assuste. Diferentemente de outras linguagens, R não requer identação para funcionar.</p>
<p>Vamos supor que um candidato teve determinada quantia de votos. Ele precisava de 700 para ser eleito. Vamos criar uma nova variável, “status”, que receberá valor “eleito” se “votos” for maior que 700. Supondo que o candidato recebeu 800 votos, fazemos:</p>
<pre class="r"><code>votos &lt;- 800

if (votos &gt; 700){
  status &lt;- &quot;eleito&quot;
}

print(status)</code></pre>
<p>Mas e se quisermos dar o valor “nao eleito” a “status” caso ele não tenha recebido mais de 700 votos? Usamos <em>else</em> para indicar o que fazer em todos os casos em que a condição em <em>if</em> não foi atendida.</p>
<pre class="r"><code>if (votos &gt; 700){
  status &lt;- &quot;eleito&quot;
} else {
  status &lt;- &quot;nao eleito&quot;
}

print(status)</code></pre>
<p>Por fim, vamos imaginar um regra mais complexa. Se o total de “votos” do candidato for maior que 1200, então ele está eleito. Se a votação tiver ficado entre 700 (exclusive) e 1200 (inclusive), ele recebe “status” igual a “suplente”. Com 700 votos ou menos, o “status” é não eleito.</p>
<p>Veja como traduzir a regra acima em código usando <em>if</em>, <em>else if</em> e <em>else</em>.</p>
<pre class="r"><code>if (votos &gt; 1200){
  status &lt;- &quot;eleito&quot;
} else if (votos &gt; 700  &amp; votos &lt;= 1200){
  status &lt;- &quot;suplente&quot;
} else {
  status &lt;- &quot;nao eleito&quot;
}

print(status)</code></pre>
<p>Outro exemplos simples do uso de condicionais, agora com uma variável de textos</p>
<pre class="r"><code>partido &lt;- &quot;PMDB&quot;

if (partido == &quot;PMDB&quot; | partido == &quot;PSD&quot; | partido == &quot;DEM&quot;) {
  print(&quot;governo&quot;)
} else {
  print(&quot;oposição&quot;)
}</code></pre>
<p>É possível complicar bastante o uso dos condicionais “aninhando” uma cláusula dentro da outra e criando “labirintos” de condições. Fazer isso, porém, é mais uma questão de lógica do que de uso da linguagem. Não há variações relevantes do uso em relação aos exemplos simples apresentados acima. Se você consegue fazer os condicionais em papel e caneta e se os exemplos anteriores tiverem ficado claros, então consegue fazê-los em R.</p>
</div>
<div id="exercício" class="section level2">
<h2>Exercício</h2>
<ul>
<li>Anote quantos cafés você tomou cada dia esta semana. Guarde o valor na variavel ‘cafe’.</li>
<li>Represente com condicionais a regra: se você tomou 3 ou mais, imprima “Hummm, café!”. Se você tomou menos de 3, imprima “zzzzzz”.</li>
</ul>
</div>
<div id="repetindo-tarefas---while-loop" class="section level2">
<h2>Repetindo tarefas - while loop</h2>
<p>Uma das vantagens dos computadores em relação aos seres humanos é a capacidade de repetir tarefas a um custo baixo. Vamos ver um exemplo simples: con tar até 42. Usaremos como recurso um <em>while</em> loop, ou seja, daremos um estado inicial, uma condição e uma instrução para o computador e pediremos para ele repetir a instrução <strong>enquanto</strong> a condição for atendida.</p>
<p>Em nosso caso, a instrução será: imprima o número “atual” (você já entenderá isso), armazenado na variável “contador”, e some mais um. A condição será: enquanto a variável “contador” for menor ou igual a 42. Se vamos começar a contar a partir do 1, nosso estado inicial será igualar o “contador” a 1. Veja como fica o código:</p>
<pre class="r"><code>contador &lt;- 1

while (contador &lt;= 42) {
  print(contador)
  contador &lt;- contador + 1
}

print(contador)</code></pre>
<p>Traduzindo para o português: “enquanto o contador for menor ou igual a 42, imprima e some um”. A estrutura de um <em>while</em> loop é sempre: “enquanto” (condição), “faça” (instrução).</p>
<p>Veja que precisamos planejar muito bem o <em>while</em> loop. Se, por exemplo, esquecermos de pensar como a condição inicial será alterada a cada <strong>iteração</strong> (sem o “n” mesmo, pois é diferente de “interação”), corremos o risco de criar um “loop infinito”. O critério de parada (condição entre parênteses) deve ser atendido em algum ponto do programa para que ele seja interrompido.</p>
<p>Vamos complicar. Seguiremos contando até 42, mas todas as vezes em que o número for par (ou seja, múltiplo de 2), deixaremos de imprimir o número. Como fazer isso? Com <em>if</em>.</p>
<p>Dica: para saber se um número é divisível por outro, basta usar o resto da divisão (consulte o tutorial anterior %%) e checar se é igual a zero.</p>
<pre class="r"><code>contador &lt;- 1

while (contador &lt;= 42) {
  if ((contador %% 2) != 0){
    print(contador)
  }
  contador &lt;- contador + 1
}

print(contador)</code></pre>
<p>Veja que temos agora um código “aninhado”, pois colocamos um condicional dentro de um loop. Novamente, combinar estruturas de código é mais um problema de lógica do que de linguagem e, se você consegue fazer no papel, consegue traduzir para o R.</p>
</div>
<div id="repetindo-tarefas---for-loop" class="section level2">
<h2>Repetindo tarefas - for loop</h2>
<p>E se em vez de repetir uma tarefa até atingir uma condição já soubermos quantas vezes queremos repetí-la? Neste caso, podemos usar o <em>for</em> loop. O loop não será mais do tipo “enquanto x faça y” mas “para todo i ‘em’ a até b”. Veja como o exemplo de contar até 42 ficaria com <em>for</em> loop:</p>
<pre class="r"><code>for (i in 1:42){
  print(i)
}</code></pre>
<p>Neste caso, lemos “para cada i ‘em’ 1 até 42, faça”. O que o <em>for</em> loop faz é variar o i a cada iteração de acordo com a sequência estabelecida. Outro exemplo, agora na ordem reversa:</p>
<pre class="r"><code>for (i in 10:-10){
  print(i)
}</code></pre>
<p>Agora com a condição de não imprimir os pares:</p>
<pre class="r"><code>for (i in 1:42){
  if((i %% 2) != 0){
    print(i)
  }
}</code></pre>
<p><em>for</em> loops não precisam ser apenas com números. Na verdade, você pode colocar após o “in” qualquer vetor. Por exemplo, um vetor das regiões brasileiras (ou UFs, se você tiver paciência de escrever todas):</p>
<pre class="r"><code>vetor_regioes &lt;- c(&quot;norte&quot;, &quot;nordeste&quot;, &quot;sudeste&quot;,&quot;sul&quot;, &quot;centro-oeste&quot;)

for (regiao in vetor_regioes){
  print(regiao)
}</code></pre>
<p>Se você já trabalhou com dados eleitorais brasileiros, você certamente teve de abrir diversos arquivos semelhantes, cada um contendo informações de um estado brasileiro. Ou ainda, se você já obteve informações na internet talvez tenha precisado “passar” por diversas páginas semelhantes. Loops resolvem problemas desse tipo: eles repetem procedimentos variando apenas um índice. Aprender a usar loops economiza um tempo enorme, pois conseguimos automatizar tarefas ou, pelo menos, escrever um código mais curto para aplicar o mesmo comando inúmeras vezes.</p>
<p>Vamos parar por aqui com <em>loops</em> e voltaremos a eles para fazermos exercícios.</p>
</div>
<div id="escrevendo-funções" class="section level2">
<h2>Escrevendo funções</h2>
<p>Ao longo dos três tutorais que fizemos usamos diversas funções e já estamos acostumados com elas. Vamos agora aprender a construir funções simples. Vamos do exemplo à aplicação. E nosso exemplo será, novamente, um conversor de farenheit para celsius:</p>
<pre class="r"><code>conversor &lt;- function(farenheit){
  celsius &lt;- ((farenheit - 32) / 9) * 5
  return(celsius)
}

conversor(212)
conversor(32)</code></pre>
<p>Temos vários elementos no “construtor” de funções. Em primeiro lugar, criamos a função como criamos um objeto. Quer dizer, escolhemos um nome para ela e atribuímos a função criada a esse nome.</p>
<p>Para criar uma função, usamos <em>function</em>. Basicamente, o “construtor” tem duas partes: os argumentos da função, que inserimos no parênteses após <em>function</em>; e o corpo da função em chaves, que utiliza os argumentos para realizar uma tarefa e retorna um resultado, indicado pela função <em>return</em>.</p>
</div>
<div id="exercício-1" class="section level2">
<h2>Exercício</h2>
<p>Crie uma função chamada “quadrado” que recebe um número “x” e retorna o quadrado de x.</p>
</div>
<div id="reposta" class="section level2">
<h2>Reposta</h2>
<pre class="r"><code>quadrado &lt;- function(x){
  resultado &lt;- x * x
  return(resultado)
}

quadrado(4)
quadrado(17)</code></pre>
</div>
<div id="exercício-2" class="section level2">
<h2>Exercício</h2>
<ul>
<li>Crie uma função que recebe um valor em reais e retorna o valor em dólares (use a cotação do dia e coloque como nota no script)</li>
<li>Crie uma função que recebe um valor em reais e uma cotação do dólar e retorna o valor em dólares (ou seja, que contém 2 parâmetros).</li>
</ul>
<div id="dica-de-leitura" class="section level3">
<h3>Dica de Leitura</h3>
<p>Uma boa leitura para acompanhar esta parte do curso são as partes II e III do livro <em>Hands-on Programming With R</em>, de Garret Grolemund.</p>
</div>
</div>
</div>
